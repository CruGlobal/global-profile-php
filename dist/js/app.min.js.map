{"version":3,"sources":["global-profile.module.js","api/measurements/measurements.module.js","states/admin/admin.module.js","states/app/app.module.js","states/profile/profile.module.js","states/select-ministry/select-ministry.module.js","states/admin/add/add.module.js","states/admin/edit/edit.module.js","states/admin/import/import.module.js","states/profile/edit/edit.module.js","global-profile.config.js","common/file-reader.directive.js","common/offset.filter.js","common/settings.service.js","directives/_directives.js","api/measurements/countries.service.js","api/measurements/languages.service.js","api/measurements/ministries.service.js","api/measurements/profile.service.js","api/measurements/session.service.js","components/profile-form/profile-form.directive.js","states/admin/sidebar.controller.js","states/select-ministry/select-ministry.controller.js","states/admin/add/add.controller.js","states/admin/edit/edit.controller.js","states/admin/import/import.controller.js","states/profile/edit/edit.controller.js"],"names":["angular","module","config","$stateProvider","state","parent","url","resolve","requiresLeader","$q","isLeader","deferred","defer","reject","promise","people","$log","ministry","Profile","query","ministry_id","$promise","views","@app","templateUrl","sidebar@admin","controller","$urlRouterProvider","otherwise","abstract","session","Session","getSession","systems","Ministries","ministries","whq","languages","Languages","countries","Countries","$state","$stateParams","isUndefined","min_code","transitionTo","_","findWhere","flatten","a","prop","items","forEach","item","push","hasOwnProperty","isArray","concat","assignments","where","roles","pluck","contains","title@app","$scope","template","profile","defaultProfile","content@admin","person_ID","person_id","go","get","user","response","status","props","property","this","navigation@app","$locationProvider","html5Mode","SettingsProvider","setConfig","window","globalProfile","$logProvider","debugEnabled","isDebug","$httpProvider","interceptors","directive","restrict","scope","fileReader","link","$element","$attrs","on","event","$apply","target","files","filter","input","start","parseInt","slice","provider","apiUrl","base","path","indexOf","c","environment","$get","api","measurements","ticket","factory","$http","Settings","cache","then","data","value","key","iso3","name","$resource","method","params","global_profile_only","whq_only","normalizeProfile","language","isString","normalizeProfileRequest","headersGetter","isObject","toJson","interceptor","resource","create","transformRequest","update","is_secure","$injector","token","isDefined","st","session_ticket","reason","request","debug","withCredentials","headers","responseError","defaultRequiredFields","require","requiredFields","transclude","showHelp","profileShowHelp","$eval","showPrivacy","profileShowPrivacy","showLeftStaff","profileShowLeftStaff","profileRequiredFields","isRequired","$watch","organizational_status","oldVal","showStaffDates","without","funding_source","showEmploymentMinistry","formatMinistryLabel","i","length","area_code","formatCountryLabel","filterText","clearFilter","copy","resetForm","saveProfile","result","reload","error","$on","toState","toParams","fromState","fromParams","profileForm","$dirty","preventDefault","$modal","open","$modalInstance","save","close","cancel","dismiss","action","$setPristine","saveChanges","parseCSV","file","hasHeader","Papa","parse","header","complete","results","columns","headerRow","shift","index","csv","pager","page","begin","browse","document","getElementById","click","id"],"mappings":"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","file":"app.min.js","sourcesContent":["(function () {\n\t'use strict';\n\n\tangular.module( 'globalProfile', [\n\t\t// Dependencies\n\t\t'ui.router',\n\t\t'globalProfile.common.settingsService',\n\t\t'globalProfile.api.measurements',\n\n\t\t// States\n\t\t'globalProfile.states.selectMinistry',\n\t\t'globalProfile.states.profile.edit',\n\t\t'globalProfile.states.admin.add',\n\t\t'globalProfile.states.admin.edit',\n\t\t'globalProfile.states.admin.import'\n\t] );\n})();\n","(function () {\n\t'use strict';\n\n\tangular.module( 'globalProfile.api.measurements', [\n\t\t// Dependencies\n\t\t'globalProfile.common.settingsService',\n\t\t'ngResource'\n\t] );\n\n})();\n","(function () {\n\t'use strict';\n\n\tangular\n\t\t.module( 'globalProfile.states.admin', [\n\t\t\t'ui.router',\n\t\t\t'globalProfile.states.profile',\n\t\t\t'globalProfile.api.measurements'\n\t\t] )\n\t\t.config( function ( $stateProvider ) {\n\t\t\t$stateProvider\n\t\t\t\t.state( 'admin', {\n\t\t\t\t\tparent:  'profile',\n\t\t\t\t\turl:     '/admin',\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\t'requiresLeader': function ( $q, isLeader ) {\n\t\t\t\t\t\t\tvar deferred = $q.defer();\n\t\t\t\t\t\t\tif ( isLeader ) deferred.resolve(); else deferred.reject( 'Not a Leader or Inherited Leader of the ministry.' );\n\t\t\t\t\t\t\treturn deferred.promise;\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'people':         function ( $log, ministry, Profile ) {\n\t\t\t\t\t\t\treturn Profile.query( {ministry_id: ministry.ministry_id} ).$promise;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tviews:   {\n\t\t\t\t\t\t'@app':          {\n\t\t\t\t\t\t\ttemplateUrl: 'js/states/admin/admin.html'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'sidebar@admin': {\n\t\t\t\t\t\t\ttemplateUrl: 'js/states/admin/sidebar.html',\n\t\t\t\t\t\t\tcontroller:  'SidebarController'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t} );\n\n})();\n","(function () {\n\t'use strict';\n\n\tangular\n\t\t.module( 'globalProfile.states.app', [\n\t\t\t// Dependencies\n\t\t\t'ui.router',\n\t\t\t'globalProfile.api.measurements'\n\t\t] )\n\t\t.config( function ( $stateProvider, $urlRouterProvider ) {\n\n\t\t\t$urlRouterProvider.otherwise( '/' );\n\n\t\t\t$stateProvider.state( 'app', {\n\t\t\t\tabstract:    true,\n\t\t\t\turl:         '/',\n\t\t\t\ttemplateUrl: 'js/states/app/app.html',\n\t\t\t\tresolve:     {\n\t\t\t\t\t'session':    function ( $log, Session ) {\n\t\t\t\t\t\treturn Session.getSession();\n\t\t\t\t\t},\n\t\t\t\t\t'systems':    function ( $log, session, Ministries ) {\n\t\t\t\t\t\treturn Ministries.systems().$promise;\n\t\t\t\t\t},\n\t\t\t\t\t'ministries': function ( $log, session, Ministries ) {\n\t\t\t\t\t\treturn Ministries.whq().$promise;\n\t\t\t\t\t},\n\t\t\t\t\t'languages':  function ( $log, session, Languages ) {\n\t\t\t\t\t\treturn Languages.languages();\n\t\t\t\t\t},\n\t\t\t\t\t'countries':  function ( $log, session, Countries ) {\n\t\t\t\t\t\treturn Countries.countries();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n})();\n","(function () {\n\t'use strict';\n\n\tangular\n\t\t.module( 'globalProfile.states.profile', [\n\t\t\t'ui.router',\n\t\t\t'globalProfile.states.app',\n\t\t\t'globalProfile.api.measurements'\n\t\t] )\n\t\t.config( function ( $stateProvider ) {\n\t\t\t$stateProvider\n\t\t\t\t.state( 'profile', {\n\t\t\t\t\tparent:   'app',\n\t\t\t\t\tabstract: true,\n\t\t\t\t\turl:      '{min_code}',\n\t\t\t\t\tresolve:  {\n\t\t\t\t\t\t'ministry':  function ( $log, $q, $state, $stateParams, session, systems ) {\n\t\t\t\t\t\t\tvar deferred = $q.defer();\n\t\t\t\t\t\t\t// Unknown min_code\n\t\t\t\t\t\t\tif ( angular.isUndefined( $stateParams.min_code ) || $stateParams.min_code === '' ) {\n\t\t\t\t\t\t\t\t$state.transitionTo( 'selectMinistry' );\n\t\t\t\t\t\t\t\tdeferred.reject();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tvar ministry = _.findWhere( systems, {min_code: $stateParams.min_code} );\n\n\t\t\t\t\t\t\t\t// Ministry is not a valid Global Profile system\n\t\t\t\t\t\t\t\tif ( angular.isUndefined( ministry ) ) {\n\t\t\t\t\t\t\t\t\t$state.transitionTo( 'selectMinistry' );\n\t\t\t\t\t\t\t\t\tdeferred.reject();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tdeferred.resolve( ministry );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn deferred.promise;\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'isLeader':  function ( $log, session, ministry ) {\n\t\t\t\t\t\t\tvar flatten = function ( a, prop ) {\n\t\t\t\t\t\t\t\tvar items = [];\n\t\t\t\t\t\t\t\tangular.forEach( a, function ( item ) {\n\t\t\t\t\t\t\t\t\titems.push( item );\n\t\t\t\t\t\t\t\t\tif ( item.hasOwnProperty( prop ) && angular.isArray( item[prop] ) ) {\n\t\t\t\t\t\t\t\t\t\titems = items.concat( flatten( item[prop], prop ) );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\treturn items;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvar assignments = _.where( flatten( session.assignments, 'sub_ministries' ), {ministry_id: ministry.ministry_id} ),\n\t\t\t\t\t\t\t\troles = _.pluck( assignments, 'team_role' );\n\t\t\t\t\t\t\treturn _.contains( roles, 'leader' ) || _.contains( roles, 'inherited_leader' );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tviews:    {\n\t\t\t\t\t\t'title@app': {\n\t\t\t\t\t\t\tcontroller: function ( $scope, ministry ) {\n\t\t\t\t\t\t\t\t$scope.ministry = ministry;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttemplate:   '{{ministry.name}}'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t} );\n\n})();\n","(function () {\n\t'use strict';\n\n\tangular\n\t\t.module( 'globalProfile.states.selectMinistry', [\n\t\t\t'ui.router',\n\t\t\t'ui.bootstrap',\n\t\t\t'globalProfile.states.app'\n\t\t] )\n\t\t.config( function ( $stateProvider ) {\n\t\t\t$stateProvider\n\t\t\t\t.state( 'selectMinistry', {\n\t\t\t\t\tparent:      'app',\n\t\t\t\t\turl:         '',\n\t\t\t\t\ttemplateUrl: 'js/states/select-ministry/select-ministry.html',\n\t\t\t\t\tcontroller:  'SelectMinistryController'\n\t\t\t\t} );\n\t\t} );\n})();\n","(function () {\n\t'use strict';\n\n\tangular\n\t\t.module( 'globalProfile.states.admin.add', [\n\t\t\t'ui.router',\n\t\t\t'globalProfile.states.admin',\n\t\t\t'globalProfile.api.measurements',\n\t\t\t'globalProfile.components.profileFormDirective'\n\t\t] )\n\t\t.config( function ( $stateProvider ) {\n\t\t\t$stateProvider\n\t\t\t\t.state( 'admin.add', {\n\t\t\t\t\turl:     '/add',\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\t'profile': function ( $log, Profile ) {\n\t\t\t\t\t\t\treturn Profile.defaultProfile();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tviews:   {\n\t\t\t\t\t\t'content@admin': {\n\t\t\t\t\t\t\ttemplateUrl: 'js/states/admin/add/add.html',\n\t\t\t\t\t\t\tcontroller:  'AddProfileController'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t} );\n\n})();\n","(function () {\n\t'use strict';\n\n\tangular\n\t\t.module( 'globalProfile.states.admin.edit', [\n\t\t\t'ui.router',\n\t\t\t'ui.bootstrap.modal',\n\t\t\t'globalProfile.states.admin',\n\t\t\t'globalProfile.components.profileFormDirective'\n\t\t] )\n\t\t.config( function ( $stateProvider ) {\n\t\t\t$stateProvider\n\t\t\t\t.state( 'admin.edit', {\n\t\t\t\t\turl:     '/{person_ID:[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}}',\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\t// person_ID must be in the list of people\n\t\t\t\t\t\t'profile':    function ( $log, $q, $stateParams, people ) {\n\t\t\t\t\t\t\tvar deferred = $q.defer();\n\t\t\t\t\t\t\tif ( angular.isUndefined( $stateParams.person_ID ) || $stateParams.person_ID === '' ) {\n\t\t\t\t\t\t\t\tdeferred.reject( 'Missing or Invalid person_id' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tvar profile = _.findWhere( people, {person_id: $stateParams.person_ID} );\n\t\t\t\t\t\t\t\tif ( angular.isUndefined( profile ) ) {\n\t\t\t\t\t\t\t\t\t$state.go( 'admin.new' );\n\t\t\t\t\t\t\t\t\tdeferred.reject();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tdeferred.resolve( profile );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn deferred.promise;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tviews:   {\n\t\t\t\t\t\t'content@admin': {\n\t\t\t\t\t\t\ttemplateUrl: 'js/states/admin/edit/edit.html',\n\t\t\t\t\t\t\tcontroller:  'EditProfileController'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t} );\n\n})();\n","(function () {\n\t'use strict';\n\n\tangular\n\t\t.module( 'globalProfile.states.admin.import', [\n\t\t\t'ui.router',\n\t\t\t'globalProfile.states.admin',\n\t\t\t'globalProfile.common.fileReaderDirective',\n\t\t\t'globalProfile.common.offsetFilter'\n\t\t] )\n\t\t.config( function ( $stateProvider ) {\n\t\t\t$stateProvider\n\t\t\t\t.state( 'admin.import', {\n\t\t\t\t\turl:     '/import',\n\t\t\t\t\tresolve: {},\n\t\t\t\t\tviews:   {\n\t\t\t\t\t\t'@app': {\n\t\t\t\t\t\t\ttemplateUrl: 'js/states/admin/import/import.html',\n\t\t\t\t\t\t\tcontroller:  'ImportCSVController'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t} );\n\n})();\n","(function () {\n\t'use strict';\n\n\tangular\n\t\t.module( 'globalProfile.states.profile.edit', [\n\t\t\t'ui.router',\n\t\t\t'globalProfile.states.profile',\n\t\t\t'globalProfile.api.measurements',\n\t\t\t'globalProfile.components.profileFormDirective'\n\t\t] )\n\t\t.config( function ( $stateProvider ) {\n\t\t\t$stateProvider\n\t\t\t\t.state( 'edit', {\n\t\t\t\t\tparent:  'profile',\n\t\t\t\t\turl:     '',\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\t'profile': function ( $log, $q, session, ministry, Profile ) {\n\t\t\t\t\t\t\tvar deferred = $q.defer();\n\t\t\t\t\t\t\tProfile\n\t\t\t\t\t\t\t\t.get( {\n\t\t\t\t\t\t\t\t\tperson_id:   session.user.person_id,\n\t\t\t\t\t\t\t\t\tministry_id: ministry.ministry_id\n\t\t\t\t\t\t\t\t}, function ( profile ) {\n\t\t\t\t\t\t\t\t\tdeferred.resolve( profile );\n\t\t\t\t\t\t\t\t}, function ( response ) {\n\t\t\t\t\t\t\t\t\t// Profile not found for current user\n\t\t\t\t\t\t\t\t\tif ( response.status === 404 ) {\n\t\t\t\t\t\t\t\t\t\t// Build new profile based on session.user attributes\n\t\t\t\t\t\t\t\t\t\tvar user = session.user,\n\t\t\t\t\t\t\t\t\t\t\tprops = ['key_username', 'key_guid', 'first_name', 'last_name', 'person_id'],\n\t\t\t\t\t\t\t\t\t\t\tprofile = Profile.defaultProfile();\n\t\t\t\t\t\t\t\t\t\tangular.forEach( props, function ( property ) {\n\t\t\t\t\t\t\t\t\t\t\t// Change key_username to email\n\t\t\t\t\t\t\t\t\t\t\tthis[property === 'key_username' ? 'email' : property] = user.hasOwnProperty( property ) ? user[property] : '';\n\t\t\t\t\t\t\t\t\t\t}, profile );\n\t\t\t\t\t\t\t\t\t\tdeferred.resolve( profile );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tdeferred.reject( response );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\treturn deferred.promise;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tviews:   {\n\t\t\t\t\t\t'@app': {\n\t\t\t\t\t\t\ttemplateUrl: 'js/states/profile/edit/edit.html',\n\t\t\t\t\t\t\tcontroller:  'EditPersonalProfileController'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'navigation@app' : {\n\t\t\t\t\t\t\tcontroller: function( $scope, isLeader ) {\n\t\t\t\t\t\t\t\t$scope.isLeader = isLeader;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttemplate: '<button type=\"button\" class=\"btn btn-sm btn-danger\" ng-if=\"isLeader\" ui-sref=\"admin\">Administrator</button>'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} )\n\n\t\t} );\n})();\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.config( function ( $locationProvider ) {\n\t\t$locationProvider.html5Mode( true );\n\t} );\n\n\t// Initialize Application Settings\n\tmodule.config( function ( SettingsProvider ) {\n\t\tSettingsProvider.setConfig( window.globalProfile.config );\n\t} );\n\n\tmodule.config( function ( $logProvider, SettingsProvider ) {\n\t\t$logProvider.debugEnabled( SettingsProvider.isDebug() );\n\t} );\n\n\t// Configure HTTP interceptors\n\tmodule.config( function ( $httpProvider ) {\n\t\t$httpProvider.interceptors.push( 'Session' );\n\t} );\n\n})( angular.module( 'globalProfile' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule\n\t\t.directive( 'fileReader', [function () {\n\t\t\treturn {\n\t\t\t\trestrict: 'A',\n\t\t\t\tscope:    {\n\t\t\t\t\tfileReader: '='\n\t\t\t\t},\n\t\t\t\tlink:     function ( $scope, $element, $attrs ) {\n\t\t\t\t\t$element.on( 'change', function ( event ) {\n\t\t\t\t\t\t$scope.$apply( function () {\n\t\t\t\t\t\t\t$scope.fileReader = event.target.files[0];\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}] );\n\n})( angular.module( 'globalProfile.common.fileReaderDirective', [] ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule\n\t\t.filter( 'offset', function () {\n\t\t\treturn function ( input, start ) {\n\t\t\t\tif ( angular.isUndefined( input ) ) return;\n\t\t\t\tstart = parseInt( start, 10 );\n\t\t\t\treturn input.slice( start );\n\t\t\t};\n\t\t} );\n\n})( angular.module( 'globalProfile.common.offsetFilter', [] ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.provider( 'Settings', function () {\n\t\tvar config = {};\n\n\t\tthis.setConfig = function ( c ) {\n\t\t\tconfig = c;\n\t\t};\n\n\t\tthis.isDebug = function () {\n\t\t\treturn config.environment === 'development';\n\t\t};\n\n\t\tfunction apiUrl( base, path ) {\n\t\t\tif ( typeof path === 'undefined' ) return base;\n\t\t\treturn ( path.indexOf( '/' ) === 0 )\n\t\t\t\t? base + path\n\t\t\t\t: base + '/' + path;\n\t\t}\n\n\t\tthis.$get = function () {\n\t\t\treturn {\n\t\t\t\tapi:    {\n\t\t\t\t\tmeasurements: function ( path ) {\n\t\t\t\t\t\treturn apiUrl( config.api.measurements, path );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tticket: config.ticket\n\t\t\t};\n\t\t}\n\t} );\n})( angular.module( 'globalProfile.common.settingsService', [] ) );\n","(function ( angular ) {\n\t'use strict';\n\tangular.module( 'globalProfile.directives', [] );\n})( angular );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.factory( 'Countries', function ( $log, $http, Settings ) {\n\t\treturn {\n\t\t\tcountries: function () {\n\t\t\t\treturn $http.get( Settings.api.measurements( '/iso_countries' ), {\n\t\t\t\t\tcache: true\n\t\t\t\t} ).then( function ( response ) {\n\t\t\t\t\tif ( angular.isArray( response.data ) ) {\n\t\t\t\t\t\treturn response.data;\n\t\t\t\t\t}\n\t\t\t\t\tvar countries = [];\n\t\t\t\t\tangular.forEach( response.data, function ( value, key ) {\n\t\t\t\t\t\tthis.push( {\n\t\t\t\t\t\t\tiso3: key,\n\t\t\t\t\t\t\tname: value\n\t\t\t\t\t\t} );\n\t\t\t\t\t}, countries );\n\t\t\t\t\treturn countries;\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\t} );\n})( angular.module( 'globalProfile.api.measurements' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.factory( 'Languages', function ( $log, $http, Settings ) {\n\t\treturn {\n\t\t\tlanguages: function () {\n\t\t\t\treturn $http.get( Settings.api.measurements( '/languages' ), {\n\t\t\t\t\tcache: true\n\t\t\t\t} ).then( function ( response ) {\n\t\t\t\t\treturn response.data;\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\t} );\n})( angular.module( 'globalProfile.api.measurements' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.factory( 'Ministries', function ( $log, $resource, Settings ) {\n\t\treturn $resource( Settings.api.measurements( '/ministries/:ministry_id' ), {}, {\n\t\t\t'systems': {method: 'GET', isArray: true, params: {global_profile_only: 'true'}, cache: true},\n\t\t\t'whq':     {method: 'GET', isArray: true, params: {whq_only: 'true'}, cache: true},\n\t\t\t'query':   {method: 'GET', isArray: true}\n\t\t} );\n\t} );\n\n})( angular.module( 'globalProfile.api.measurements' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.factory( 'Profile', function ( $log, $resource, Settings ) {\n\t\tvar normalizeProfile = function ( profile ) {\n\t\t\t\t// Language\n\t\t\t\tif ( angular.isUndefined( profile.language ) ) {\n\t\t\t\t\tprofile.language = [];\n\t\t\t\t} else if ( angular.isString( profile.language ) ) {\n\t\t\t\t\tprofile.language = [profile.language];\n\t\t\t\t}\n\n\t\t\t\t//Assignments\n\t\t\t\tif ( angular.isUndefined( profile.assignments ) ) {\n\t\t\t\t\tprofile.assignments = [{}];\n\t\t\t\t}\n\n\t\t\t\treturn profile;\n\t\t\t},\n\t\t\tnormalizeProfileRequest = function ( profile, headersGetter ) {\n\t\t\t\tangular.forEach( profile, function ( value, key ) {\n\t\t\t\t\tif ( angular.isUndefined( value ) || value === null ) {\n\t\t\t\t\t\tdelete profile[key];\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn angular.isObject( profile ) ? angular.toJson( profile ) : profile;\n\t\t\t},\n\t\t\tapi = $resource( Settings.api.measurements( '/people/:person_id' ), {\n\t\t\t\tperson_id:   '@person_id',\n\t\t\t\tministry_id: '@ministry_id'\n\t\t\t}, {\n\t\t\t\tget:    {\n\t\t\t\t\tmethod: 'GET', interceptor: {\n\t\t\t\t\t\tresponse: function ( response ) {\n\t\t\t\t\t\t\treturn normalizeProfile( response.resource );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tquery:  {\n\t\t\t\t\tmethod: 'GET', isArray: true, interceptor: {\n\t\t\t\t\t\tresponse: function ( response ) {\n\t\t\t\t\t\t\treturn angular.forEach( response.resource, normalizeProfile );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcreate: {method: 'POST', transformRequest: normalizeProfileRequest},\n\t\t\t\tupdate: {method: 'PUT', transformRequest: normalizeProfileRequest}\n\t\t\t} );\n\t\tapi.defaultProfile = function () {\n\t\t\treturn normalizeProfile( {\n\t\t\t\tis_secure: false\n\t\t\t} );\n\t\t};\n\t\treturn api;\n\t} );\n})( angular.module( 'globalProfile.api.measurements' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.factory( 'Session', function ( $injector, $q, $log, Settings ) {\n\t\tvar token,\n\t\t\tsession;\n\n\t\treturn {\n\t\t\tgetSession:    function () {\n\t\t\t\tvar deferred = $q.defer();\n\t\t\t\tif ( angular.isDefined( session ) ) {\n\t\t\t\t\tdeferred.resolve( session );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$injector.get( '$http' )\n\t\t\t\t\t\t.get( Settings.api.measurements( '/token' ), {params: {st: Settings.ticket}} )\n\t\t\t\t\t\t.then( function ( response ) {\n\t\t\t\t\t\t\ttoken = response.data.session_ticket;\n\t\t\t\t\t\t\tsession = response.data;\n\t\t\t\t\t\t\tdeferred.resolve( session );\n\t\t\t\t\t\t}, function ( reason ) {\n\t\t\t\t\t\t\tdeferred.reject( reason );\n\t\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\treturn deferred.promise;\n\t\t\t},\n\t\t\trequest:       function ( config ) {\n\t\t\t\tif ( config.url.indexOf( Settings.api.measurements() ) === 0 ) {\n\t\t\t\t\t$log.debug( 'Measurements API Request', config );\n\n\t\t\t\t\t// Enable HTTP Credentials for measurements API requests\n\t\t\t\t\tconfig.withCredentials = true;\n\n\t\t\t\t\t// Add token to request as Authorization Bearer\n\t\t\t\t\tif ( !angular.isUndefined( token ) ) {\n\t\t\t\t\t\tconfig.headers['Authorization'] = 'Bearer ' + token;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn config;\n\t\t\t},\n\t\t\tresponseError: function ( response ) {\n\t\t\t\treturn $q.reject( response );\n\t\t\t}\n\t\t}\n\t} );\n})( angular.module( 'globalProfile.api.measurements' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule\n\t\t.directive( 'profileForm', ['$log', 'Languages', 'Countries', 'Ministries', function ( $log, Languages, Countries, Ministries ) {\n\t\t\tvar defaultRequiredFields = [\n\t\t\t\t'email',\n\t\t\t\t'last_name',\n\t\t\t\t'first_name',\n\t\t\t\t'gender',\n\t\t\t\t'birth_date',\n\t\t\t\t'marital_status',\n\t\t\t\t'country_of_residence',\n\t\t\t\t'language1',\n\t\t\t\t'organizational_status',\n\t\t\t\t'funding_source',\n\t\t\t\t'date_joined_staff',\n\t\t\t\t'ministry_of_employment',\n\t\t\t\t'assignment_ministry',\n\t\t\t\t'mcc',\n\t\t\t\t'position_role',\n\t\t\t\t'scope'\n\t\t\t];\n\t\t\treturn {\n\t\t\t\trestrict:    'E',\n\t\t\t\trequire:     ['^ngModel'],\n\t\t\t\tscope:       {\n\t\t\t\t\tprofile:        '=ngModel',\n\t\t\t\t\trequiredFields: '=?profileRequiredFields',\n\t\t\t\t\tministries:     '=profileMinistries',\n\t\t\t\t\tlanguages:      '=profileLanguages',\n\t\t\t\t\tcountries:      '=profileCountries'\n\t\t\t\t},\n\t\t\t\ttemplateUrl: 'js/components/profile-form/profile-form.html',\n\t\t\t\ttransclude:  true,\n\t\t\t\tlink:        function ( $scope, $element, $attrs ) {\n\t\t\t\t\t$scope.showHelp = angular.isUndefined( $attrs.profileShowHelp ) ? true : $scope.$eval( $attrs.profileShowHelp ) === true;\n\t\t\t\t\t$scope.showPrivacy = $scope.$eval( $attrs.profileShowPrivacy ) === true;\n\t\t\t\t\t$scope.showLeftStaff = $scope.$eval( $attrs.profileShowLeftStaff ) === true;\n\n\t\t\t\t\tif ( angular.isUndefined( $attrs.profileRequiredFields ) ) {\n\t\t\t\t\t\t$scope.requiredFields = defaultRequiredFields;\n\t\t\t\t\t}\n\n\t\t\t\t\t$scope.isRequired = function ( name ) {\n\t\t\t\t\t\treturn $scope.requiredFields.indexOf( name ) > -1;\n\t\t\t\t\t};\n\n\t\t\t\t\t$scope.$watch( 'profile.organizational_status', function ( organizational_status, oldVal ) {\n\t\t\t\t\t\tif ( angular.isUndefined( organizational_status ) || organizational_status == 'Volunteer' || organizational_status == 'Other' ) {\n\t\t\t\t\t\t\t$scope.showStaffDates = false;\n\t\t\t\t\t\t\t$scope.requiredFields = _.without( $scope.requiredFields, 'date_joined_staff' );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$scope.showStaffDates = true;\n\t\t\t\t\t\t\tif ( _.indexOf( $scope.requiredFields, 'date_joined_staff' ) === -1 ) {\n\t\t\t\t\t\t\t\t$scope.requiredFields.push( 'date_joined_staff' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t$scope.$watch( 'profile.organizational_status', function ( organizational_status, oldVal ) {\n\t\t\t\t\t\tif( $scope.profile.funding_source === 'Other' ) return;\n\t\t\t\t\t\tif ( angular.isUndefined( organizational_status ) || organizational_status == 'Volunteer' ) {\n\t\t\t\t\t\t\t$scope.showEmploymentMinistry = false;\n\t\t\t\t\t\t\t$scope.requiredFields = _.without( $scope.requiredFields, 'ministry_of_employment' );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$scope.showEmploymentMinistry = true;\n\t\t\t\t\t\t\tif ( _.indexOf( $scope.requiredFields, 'ministry_of_employment' ) === -1 ) {\n\t\t\t\t\t\t\t\t$scope.requiredFields.push( 'ministry_of_employment' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t$scope.$watch( 'profile.funding_source', function ( funding_source, oldVal ) {\n\t\t\t\t\t\tif( $scope.profile.organizational_status === 'Volunteer' ) return;\n\t\t\t\t\t\tif ( angular.isUndefined( funding_source ) || funding_source == 'Other' ) {\n\t\t\t\t\t\t\t$scope.showEmploymentMinistry = false;\n\t\t\t\t\t\t\t$scope.requiredFields = _.without( $scope.requiredFields, 'ministry_of_employment' );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$scope.showEmploymentMinistry = true;\n\t\t\t\t\t\t\tif ( _.indexOf( $scope.requiredFields, 'ministry_of_employment' ) === -1 ) {\n\t\t\t\t\t\t\t\t$scope.requiredFields.push( 'ministry_of_employment' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t$scope.formatMinistryLabel = function ( ministry_id ) {\n\t\t\t\t\t\tfor ( var i = 0; i < $scope.ministries.length; i++ ) {\n\t\t\t\t\t\t\tif ( ministry_id === $scope.ministries[i].ministry_id ) {\n\t\t\t\t\t\t\t\treturn $scope.ministries[i].area_code + ' — ' + $scope.ministries[i].name;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t$scope.formatCountryLabel = function ( iso3 ) {\n\t\t\t\t\t\tfor ( var i = 0; i < $scope.countries.length; i++ ) {\n\t\t\t\t\t\t\tif ( iso3 === $scope.countries[i].iso3 ) {\n\t\t\t\t\t\t\t\treturn $scope.countries[i].name;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}] );\n\n})( angular.module( 'globalProfile.components.profileFormDirective', [\n\t'globalProfile.api.measurements'\n] ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule\n\t\t.controller( 'SidebarController', function ( $log, $scope, $state, people ) {\n\t\t\t$scope.$state = $state;\n\t\t\t$scope.people = people;\n\t\t\t$scope.filterText = '';\n\n\t\t\t$scope.clearFilter = function () {\n\t\t\t\t$scope.filterText = '';\n\t\t\t}\n\t\t} );\n\n})( angular.module( 'globalProfile.states.admin' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.controller( 'SelectMinistryController', function ( $log, $scope, $state, session, systems ) {\n\t\tfunction flatten( a, prop ) {\n\t\t\tvar items = [];\n\t\t\tangular.forEach( a, function ( item ) {\n\t\t\t\titems.push( item );\n\t\t\t\tif ( item.hasOwnProperty( prop ) && angular.isArray( item[prop] ) ) {\n\t\t\t\t\titems = items.concat( flatten( item[prop], prop ) );\n\t\t\t\t}\n\t\t\t} );\n\t\t\treturn items;\n\t\t}\n\n\t\tvar assignments = flatten( session.assignments, 'sub_ministries' );\n\n\t\t$scope.$state = $state;\n\t\t$scope.ministries = systems;\n\n\t\t$scope.isLeader = function ( ministry_id ) {\n\t\t\tvar roles = _.pluck( _.where( assignments, {ministry_id: ministry_id} ), 'team_role' );\n\t\t\treturn _.contains( roles, 'leader' ) || _.contains( roles, 'inherited_leader' );\n\t\t};\n\t} );\n\n})( angular.module( 'globalProfile.states.selectMinistry' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule\n\t\t.controller( 'AddProfileController', function ( $log, $scope, $state, profile, ministry, Profile, ministries, countries, languages ) {\n\t\t\t$scope.$state = $state;\n\t\t\t$scope.requiredFields = [\n\t\t\t\t'email',\n\t\t\t\t'last_name',\n\t\t\t\t'first_name',\n\t\t\t\t'gender',\n\t\t\t\t'birth_date',\n\t\t\t\t'marital_status',\n\t\t\t\t'country_of_residence',\n\t\t\t\t'language1',\n\t\t\t\t'organizational_status',\n\t\t\t\t'funding_source',\n\t\t\t\t'date_joined_staff',\n\t\t\t\t'ministry_of_employment',\n\t\t\t\t'assignment_ministry',\n\t\t\t\t'mcc',\n\t\t\t\t'position_role',\n\t\t\t\t'scope'\n\t\t\t];\n\t\t\t$scope.profile = angular.copy( profile );\n\t\t\t$scope.ministries = ministries;\n\t\t\t$scope.countries = countries;\n\t\t\t$scope.languages = languages;\n\n\t\t\t$scope.resetForm = function () {\n\t\t\t\t$scope.profile = angular.copy( profile );\n\t\t\t};\n\n\t\t\t$scope.saveProfile = function () {\n\t\t\t\tProfile.create( {ministry_id: ministry.ministry_id}, $scope.profile, function ( result ) {\n\t\t\t\t\t$state.go( 'admin.edit', {person_ID: result.person_id}, {reload: true} );\n\t\t\t\t}, function () {\n\t\t\t\t\t$log.error( 'Error Saving Profile' );\n\t\t\t\t} );\n\t\t\t};\n\n\t\t\t$scope.$on( '$stateChangeStart', function ( event, toState, toParams, fromState, fromParams ) {\n\t\t\t\tif ( $scope.profileForm.$dirty ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t$modal.open( {\n\t\t\t\t\t\ttemplateUrl: 'js/states/admin/unsaved.modal.html',\n\t\t\t\t\t\tcontroller:  function ( $scope, $modalInstance ) {\n\t\t\t\t\t\t\t$scope.save = function () {\n\t\t\t\t\t\t\t\t$modalInstance.close();\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t$scope.cancel = function () {\n\t\t\t\t\t\t\t\t$modalInstance.dismiss( 'discard' );\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t} ).result.then( function () {\n\t\t\t\t\t\t}, function ( action ) {\n\t\t\t\t\t\t\tif ( action === 'discard' ) {\n\t\t\t\t\t\t\t\t$scope.profileForm.$setPristine();\n\t\t\t\t\t\t\t\t$state.transitionTo( toState, toParams );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t} );\n\n})( angular.module( 'globalProfile.states.admin.add' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule\n\t\t.controller( 'EditProfileController', function ( $log, $scope, $state, profile, ministry, Profile, $modal, ministries, countries, languages ) {\n\t\t\t$scope.$state = $state;\n\t\t\t$scope.requiredFields = [\n\t\t\t\t'email',\n\t\t\t\t'last_name',\n\t\t\t\t'first_name',\n\t\t\t\t'gender',\n\t\t\t\t'birth_date',\n\t\t\t\t'marital_status',\n\t\t\t\t'country_of_residence',\n\t\t\t\t'language1',\n\t\t\t\t'organizational_status',\n\t\t\t\t'funding_source',\n\t\t\t\t'date_joined_staff',\n\t\t\t\t'ministry_of_employment',\n\t\t\t\t'assignment_ministry',\n\t\t\t\t'mcc',\n\t\t\t\t'position_role',\n\t\t\t\t'scope'\n\t\t\t];\n\t\t\t$scope.profile = angular.copy( profile );\n\t\t\t$scope.ministries = ministries;\n\t\t\t$scope.countries = countries;\n\t\t\t$scope.languages = languages;\n\n\t\t\t$scope.resetForm = function () {\n\t\t\t\t$scope.profile = angular.copy( profile );\n\t\t\t\t$scope.profileForm.$setPristine();\n\t\t\t};\n\n\t\t\t$scope.saveChanges = function () {\n\t\t\t\tProfile.update( {ministry_id: ministry.ministry_id}, $scope.profile, function ( result ) {\n\t\t\t\t\tprofile = result;\n\t\t\t\t\t$scope.profile = angular.copy( profile );\n\t\t\t\t\t$scope.profileForm.$setPristine();\n\t\t\t\t}, function () {\n\t\t\t\t\t$log.error( 'Error Saving Profile' );\n\t\t\t\t} );\n\t\t\t};\n\n\t\t\t$scope.$on( '$stateChangeStart', function ( event, toState, toParams, fromState, fromParams ) {\n\t\t\t\tif ( $scope.profileForm.$dirty ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t$modal.open( {\n\t\t\t\t\t\ttemplateUrl: 'js/states/admin/unsaved.modal.html',\n\t\t\t\t\t\tcontroller:  function ( $scope, $modalInstance ) {\n\t\t\t\t\t\t\t$scope.save = function () {\n\t\t\t\t\t\t\t\t$modalInstance.close();\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t$scope.cancel = function () {\n\t\t\t\t\t\t\t\t$modalInstance.dismiss( 'discard' );\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t} ).result.then( function () {\n\t\t\t\t\t\t}, function ( action ) {\n\t\t\t\t\t\t\tif ( action === 'discard' ) {\n\t\t\t\t\t\t\t\t$scope.profileForm.$setPristine();\n\t\t\t\t\t\t\t\t$state.transitionTo( toState, toParams );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n})( angular.module( 'globalProfile.states.admin.edit' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule\n\t\t.controller( 'ImportCSVController', function ( $log, $scope, $state, ministry, Profile ) {\n\t\t\t$scope.$state = $state;\n\t\t\t$scope.hasHeader = true;\n\t\t\t$scope.columns = [];\n\t\t\t$scope.pager = {\n\t\t\t\tpage:  1,\n\t\t\t\tbegin: 0\n\t\t\t};\n\n\t\t\t$scope.browse = function () {\n\t\t\t\tdocument.getElementById( 'fileBrowser' ).click();\n\t\t\t};\n\n\t\t\t$scope.$watch( 'file', function ( file ) {\n\t\t\t\tif ( angular.isUndefined( file ) ) return;\n\t\t\t\tparseCSV();\n\t\t\t} );\n\n\t\t\t$scope.$watch( 'hasHeader', function ( hasHeader ) {\n\t\t\t\tparseCSV();\n\t\t\t} );\n\n\t\t\t$scope.$watch( 'pager.page', function ( page ) {\n\t\t\t\tif ( angular.isUndefined( $scope.csv ) ) return;\n\t\t\t\t$scope.pager.begin = (page - 1) * 10;\n\t\t\t} );\n\n\t\t\tfunction parseCSV() {\n\t\t\t\tif ( angular.isUndefined( $scope.file ) ) return;\n\t\t\t\tif ( angular.isUndefined( $scope.hasHeader ) ) return;\n\n\t\t\t\tPapa.parse( $scope.file, {\n\t\t\t\t\theader:   false, // We remove first row manually if hasHeader is true\n\t\t\t\t\tcomplete: function ( results, file ) {\n\t\t\t\t\t\tvar columns = [];\n\t\t\t\t\t\t$scope.$apply( function () {\n\t\t\t\t\t\t\tif ( $scope.hasHeader ) {\n\t\t\t\t\t\t\t\t$scope.headerRow = results.data.shift();\n\t\t\t\t\t\t\t\tfor ( var i = 0; i < $scope.headerRow.length; i++ )\n\t\t\t\t\t\t\t\t\tcolumns.push( {index: i} );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdelete $scope.headerRow;\n\t\t\t\t\t\t\t\tfor ( var i = 0; i < results.data[0].length; i++ )\n\t\t\t\t\t\t\t\t\tcolumns.push( {index: i} );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$scope.columns = columns;\n\t\t\t\t\t\t\t$scope.csv = results;\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t\t}\n\t\t} );\n\n})( angular.module( 'globalProfile.states.admin.import' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.controller( 'EditPersonalProfileController', function ( $log, $scope, session, ministry, profile, Profile, ministries, countries, languages ) {\n\t\t$scope.profile = angular.copy( profile );\n\t\t$scope.ministries = ministries;\n\t\t$scope.countries = countries;\n\t\t$scope.languages = languages;\n\n\t\t$scope.resetForm = function () {\n\t\t\t$scope.profile = angular.copy( profile );\n\t\t\t$scope.profileForm.$setPristine();\n\t\t};\n\n\t\t$scope.saveChanges = function () {\n\t\t\tvar method = angular.isUndefined( profile.id ) ? 'create' : 'update';\n\t\t\tProfile[method]( {ministry_id: ministry.ministry_id}, $scope.profile, function ( response ) {\n\t\t\t\tprofile = response;\n\t\t\t\t$scope.profile = angular.copy( profile );\n\t\t\t\t$scope.profileForm.$setPristine();\n\t\t\t} );\n\t\t};\n\t} );\n})( angular.module( 'globalProfile.states.profile.edit' ) );\n"],"sourceRoot":"/source/"}