{"version":3,"sources":["global-profile.module.js","api/measurements/measurements.module.js","states/admin/admin.module.js","states/app/app.module.js","states/profile/profile.module.js","states/select-ministry/select-ministry.module.js","states/admin/add/add.module.js","states/admin/edit/edit.module.js","states/admin/import/import.module.js","states/profile/edit/edit.module.js","global-profile.config.js","common/file-reader.directive.js","common/offset.filter.js","common/settings.service.js","directives/_directives.js","directives/rtl-options-directive.js","api/measurements/countries.service.js","api/measurements/languages.service.js","api/measurements/ministries.service.js","api/measurements/profile.service.js","api/measurements/session.service.js","components/profile-form/profile-form.directive.js","states/admin/sidebar.controller.js","states/select-ministry/select-ministry.controller.js","states/admin/add/add.controller.js","states/admin/edit/edit.controller.js","states/admin/import/import.controller.js","states/profile/edit/edit.controller.js"],"names":["angular","module","config","$stateProvider","state","parent","url","resolve","requiresLeader","$q","isLeader","deferred","defer","reject","promise","people","$log","ministry","Profile","query","ministry_id","$promise","views","@app","templateUrl","sidebar@admin","controller","$urlRouterProvider","otherwise","abstract","session","Session","getSession","systems","Ministries","$state","$stateParams","isUndefined","min_code","transitionTo","_","findWhere","flatten","a","prop","items","forEach","item","push","hasOwnProperty","isArray","concat","assignments","where","roles","pluck","contains","title@app","$scope","template","profile","defaultProfile","content@admin","person_ID","person_id","go","get","user","response","status","props","property","this","navigation@app","$locationProvider","html5Mode","SettingsProvider","setConfig","window","globalProfile","$logProvider","debugEnabled","isDebug","$httpProvider","interceptors","directive","restrict","scope","fileReader","link","$element","$attrs","on","event","$apply","target","files","filter","input","start","parseInt","slice","provider","apiUrl","base","path","indexOf","c","environment","$get","api","measurements","ticket","$parse","rtlOptions","attr","element","data","fnRtlIfTrue","options","find","pos","index","length","elem","val","locals","priority","require","iElement","iAttrs","ctrl","expElements","match","attrToWatch","$watch","newValue","oldValue","ngModel","disOptions","factory","$http","Settings","countries","cache","then","languages","$resource","method","params","global_profile_only","normalizeProfile","language","isString","interceptor","resource","create","update","is_secure","$injector","token","isDefined","st","session_ticket","reason","request","debug","withCredentials","headers","responseError","Languages","Countries","defaultRequiredFields","requiredFields","transclude","showHelp","profileShowHelp","$eval","showPrivacy","profileShowPrivacy","showLeftStaff","profileShowLeftStaff","profileRequiredFields","isRequired","name","staff_status","oldVal","showStaffDates","without","funding_source","showEmploymentCountry","filterText","clearFilter","ministries","copy","resetForm","saveProfile","result","reload","error","$on","toState","toParams","fromState","fromParams","profileForm","$dirty","preventDefault","$modal","open","$modalInstance","save","close","cancel","dismiss","action","$setPristine","saveChanges","parseCSV","file","hasHeader","Papa","parse","header","complete","results","columns","headerRow","shift","i","csv","pager","page","begin","browse","document","getElementById","click","id"],"mappings":"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","file":"app.min.js","sourcesContent":["(function () {\n\t'use strict';\n\n\tangular.module( 'globalProfile', [\n\t\t// Dependencies\n\t\t'ui.router',\n\t\t'globalProfile.common.settingsService',\n\t\t'globalProfile.api.measurements',\n\n\t\t// States\n\t\t'globalProfile.states.selectMinistry',\n\t\t'globalProfile.states.profile.edit',\n\t\t'globalProfile.states.admin.add',\n\t\t'globalProfile.states.admin.edit',\n\t\t'globalProfile.states.admin.import'\n\t] );\n})();\n","(function () {\n\t'use strict';\n\n\tangular.module( 'globalProfile.api.measurements', [\n\t\t// Dependencies\n\t\t'globalProfile.common.settingsService',\n\t\t'ngResource'\n\t] );\n\n})();\n","(function () {\n\t'use strict';\n\n\tangular\n\t\t.module( 'globalProfile.states.admin', [\n\t\t\t'ui.router',\n\t\t\t'globalProfile.states.profile',\n\t\t\t'globalProfile.api.measurements'\n\t\t] )\n\t\t.config( function ( $stateProvider ) {\n\t\t\t$stateProvider\n\t\t\t\t.state( 'admin', {\n\t\t\t\t\tparent:  'profile',\n\t\t\t\t\turl:     '/admin',\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\t'requiresLeader': function ( $q, isLeader ) {\n\t\t\t\t\t\t\tvar deferred = $q.defer();\n\t\t\t\t\t\t\tif ( isLeader ) deferred.resolve(); else deferred.reject( 'Not a Leader or Inherited Leader of the ministry.' );\n\t\t\t\t\t\t\treturn deferred.promise;\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'people':         function ( $log, ministry, Profile ) {\n\t\t\t\t\t\t\treturn Profile.query( {ministry_id: ministry.ministry_id} ).$promise;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tviews:   {\n\t\t\t\t\t\t'@app':          {\n\t\t\t\t\t\t\ttemplateUrl: 'js/states/admin/admin.html'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'sidebar@admin': {\n\t\t\t\t\t\t\ttemplateUrl: 'js/states/admin/sidebar.html',\n\t\t\t\t\t\t\tcontroller:  'SidebarController'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t} );\n\n})();\n","(function () {\n\t'use strict';\n\n\tangular\n\t\t.module( 'globalProfile.states.app', [\n\t\t\t// Dependencies\n\t\t\t'ui.router',\n\t\t\t'globalProfile.api.measurements'\n\t\t] )\n\t\t.config( function ( $stateProvider, $urlRouterProvider ) {\n\n\t\t\t$urlRouterProvider.otherwise( '/' );\n\n\t\t\t$stateProvider.state( 'app', {\n\t\t\t\tabstract:    true,\n\t\t\t\turl:         '/',\n\t\t\t\ttemplateUrl: 'js/states/app/app.html',\n\t\t\t\tresolve:     {\n\t\t\t\t\t'session': function ( $log, Session ) {\n\t\t\t\t\t\treturn Session.getSession();\n\t\t\t\t\t},\n\t\t\t\t\t'systems': function ( $log, session, Ministries ) {\n\t\t\t\t\t\treturn Ministries.systems().$promise;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t\n})();\n","(function () {\n\t'use strict';\n\n\tangular\n\t\t.module( 'globalProfile.states.profile', [\n\t\t\t'ui.router',\n\t\t\t'globalProfile.states.app',\n\t\t\t'globalProfile.api.measurements'\n\t\t] )\n\t\t.config( function ( $stateProvider ) {\n\t\t\t$stateProvider\n\t\t\t\t.state( 'profile', {\n\t\t\t\t\tparent:   'app',\n\t\t\t\t\tabstract: true,\n\t\t\t\t\turl:      '{min_code}',\n\t\t\t\t\tresolve:  {\n\t\t\t\t\t\t'ministry':  function ( $log, $q, $state, $stateParams, session, systems ) {\n\t\t\t\t\t\t\tvar deferred = $q.defer();\n\t\t\t\t\t\t\t// Unknown min_code\n\t\t\t\t\t\t\tif ( angular.isUndefined( $stateParams.min_code ) || $stateParams.min_code === '' ) {\n\t\t\t\t\t\t\t\t$state.transitionTo( 'selectMinistry' );\n\t\t\t\t\t\t\t\tdeferred.reject();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tvar ministry = _.findWhere( systems, {min_code: $stateParams.min_code} );\n\n\t\t\t\t\t\t\t\t// Ministry is not a valid Global Profile system\n\t\t\t\t\t\t\t\tif ( angular.isUndefined( ministry ) ) {\n\t\t\t\t\t\t\t\t\t$state.transitionTo( 'selectMinistry' );\n\t\t\t\t\t\t\t\t\tdeferred.reject();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tdeferred.resolve( ministry );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn deferred.promise;\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'isLeader':  function ( $log, session, ministry ) {\n\t\t\t\t\t\t\tvar flatten = function ( a, prop ) {\n\t\t\t\t\t\t\t\tvar items = [];\n\t\t\t\t\t\t\t\tangular.forEach( a, function ( item ) {\n\t\t\t\t\t\t\t\t\titems.push( item );\n\t\t\t\t\t\t\t\t\tif ( item.hasOwnProperty( prop ) && angular.isArray( item[prop] ) ) {\n\t\t\t\t\t\t\t\t\t\titems = items.concat( flatten( item[prop], prop ) );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\treturn items;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvar assignments = _.where( flatten( session.assignments, 'sub_ministries' ), {ministry_id: ministry.ministry_id} ),\n\t\t\t\t\t\t\t\troles = _.pluck( assignments, 'team_role' );\n\t\t\t\t\t\t\treturn _.contains( roles, 'leader' ) || _.contains( roles, 'inherited_leader' );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tviews:    {\n\t\t\t\t\t\t'title@app': {\n\t\t\t\t\t\t\tcontroller: function ( $scope, ministry ) {\n\t\t\t\t\t\t\t\t$scope.ministry = ministry;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttemplate:   '{{ministry.name}}'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t} );\n\n})();\n","(function () {\n\t'use strict';\n\n\tangular\n\t\t.module( 'globalProfile.states.selectMinistry', [\n\t\t\t'ui.router',\n\t\t\t'ui.bootstrap',\n\t\t\t'globalProfile.states.app'\n\t\t] )\n\t\t.config( function ( $stateProvider ) {\n\t\t\t$stateProvider\n\t\t\t\t.state( 'selectMinistry', {\n\t\t\t\t\tparent:      'app',\n\t\t\t\t\turl:         '',\n\t\t\t\t\ttemplateUrl: 'js/states/select-ministry/select-ministry.html',\n\t\t\t\t\tcontroller:  'SelectMinistryController'\n\t\t\t\t} );\n\t\t} );\n})();\n","(function () {\n\t'use strict';\n\n\tangular\n\t\t.module( 'globalProfile.states.admin.add', [\n\t\t\t'ui.router',\n\t\t\t'globalProfile.states.admin',\n\t\t\t'globalProfile.api.measurements',\n\t\t\t'globalProfile.components.profileFormDirective'\n\t\t] )\n\t\t.config( function ( $stateProvider ) {\n\t\t\t$stateProvider\n\t\t\t\t.state( 'admin.add', {\n\t\t\t\t\turl:     '/add',\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\t'profile': function ( $log, Profile ) {\n\t\t\t\t\t\t\treturn Profile.defaultProfile();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tviews:   {\n\t\t\t\t\t\t'content@admin': {\n\t\t\t\t\t\t\ttemplateUrl: 'js/states/admin/add/add.html',\n\t\t\t\t\t\t\tcontroller:  'AddProfileController'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t} );\n\n})();\n","(function () {\n\t'use strict';\n\n\tangular\n\t\t.module( 'globalProfile.states.admin.edit', [\n\t\t\t'ui.router',\n\t\t\t'ui.bootstrap.modal',\n\t\t\t'globalProfile.states.admin',\n\t\t\t'globalProfile.components.profileFormDirective'\n\t\t] )\n\t\t.config( function ( $stateProvider ) {\n\t\t\t$stateProvider\n\t\t\t\t.state( 'admin.edit', {\n\t\t\t\t\turl:     '/{person_ID:[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}}',\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\t// person_ID must be in the list of people\n\t\t\t\t\t\t'profile': function ( $log, $q, $stateParams, people ) {\n\t\t\t\t\t\t\tvar deferred = $q.defer();\n\t\t\t\t\t\t\tif ( angular.isUndefined( $stateParams.person_ID ) || $stateParams.person_ID === '' ) {\n\t\t\t\t\t\t\t\tdeferred.reject( 'Missing or Invalid person_id' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tvar profile = _.findWhere( people, {person_id: $stateParams.person_ID} );\n\t\t\t\t\t\t\t\tif ( angular.isUndefined( profile ) ) {\n\t\t\t\t\t\t\t\t\t$state.go( 'admin.new' );\n\t\t\t\t\t\t\t\t\tdeferred.reject();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tdeferred.resolve( profile );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn deferred.promise;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tviews:   {\n\t\t\t\t\t\t'content@admin': {\n\t\t\t\t\t\t\ttemplateUrl: 'js/states/admin/edit/edit.html',\n\t\t\t\t\t\t\tcontroller:  'EditProfileController'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t} );\n\n})();\n","(function () {\n\t'use strict';\n\n\tangular\n\t\t.module( 'globalProfile.states.admin.import', [\n\t\t\t'ui.router',\n\t\t\t'globalProfile.states.admin',\n\t\t\t'globalProfile.common.fileReaderDirective',\n\t\t\t'globalProfile.common.offsetFilter'\n\t\t] )\n\t\t.config( function ( $stateProvider ) {\n\t\t\t$stateProvider\n\t\t\t\t.state( 'admin.import', {\n\t\t\t\t\turl:     '/import',\n\t\t\t\t\tresolve: {},\n\t\t\t\t\tviews:   {\n\t\t\t\t\t\t'@app': {\n\t\t\t\t\t\t\ttemplateUrl: 'js/states/admin/import/import.html',\n\t\t\t\t\t\t\tcontroller:  'ImportCSVController'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t} );\n\n})();\n","(function () {\n\t'use strict';\n\n\tangular\n\t\t.module( 'globalProfile.states.profile.edit', [\n\t\t\t'ui.router',\n\t\t\t'globalProfile.states.profile',\n\t\t\t'globalProfile.api.measurements',\n\t\t\t'globalProfile.components.profileFormDirective',\n\t\t] )\n\t\t.config( function ( $stateProvider ) {\n\t\t\t$stateProvider\n\t\t\t\t.state( 'edit', {\n\t\t\t\t\tparent:  'profile',\n\t\t\t\t\turl:     '',\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\t'profile': function ( $log, $q, session, ministry, Profile ) {\n\t\t\t\t\t\t\tvar deferred = $q.defer();\n\t\t\t\t\t\t\tProfile\n\t\t\t\t\t\t\t\t.get( {\n\t\t\t\t\t\t\t\t\tperson_id:   session.user.person_id,\n\t\t\t\t\t\t\t\t\tministry_id: ministry.ministry_id\n\t\t\t\t\t\t\t\t}, function ( profile ) {\n\t\t\t\t\t\t\t\t\tdeferred.resolve( profile );\n\t\t\t\t\t\t\t\t}, function ( response ) {\n\t\t\t\t\t\t\t\t\t// Profile not found for current user\n\t\t\t\t\t\t\t\t\tif ( response.status === 404 ) {\n\t\t\t\t\t\t\t\t\t\t// Build new profile based on session.user attributes\n\t\t\t\t\t\t\t\t\t\tvar user = session.user,\n\t\t\t\t\t\t\t\t\t\t\tprops = ['cas_username', 'key_guid', 'first_name', 'last_name', 'person_id'],\n\t\t\t\t\t\t\t\t\t\t\tprofile = Profile.defaultProfile();\n\t\t\t\t\t\t\t\t\t\tangular.forEach( props, function ( property ) {\n\t\t\t\t\t\t\t\t\t\t\t// Change cas_username to email\n\t\t\t\t\t\t\t\t\t\t\tthis[property === 'cas_username' ? 'email' : 'property'] = user.hasOwnProperty( property ) ? user[property] : '';\n\t\t\t\t\t\t\t\t\t\t}, profile );\n\t\t\t\t\t\t\t\t\t\tdeferred.resolve( profile );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tdeferred.reject( response );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\treturn deferred.promise;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tviews:   {\n\t\t\t\t\t\t'@app': {\n\t\t\t\t\t\t\ttemplateUrl: 'js/states/profile/edit/edit.html',\n\t\t\t\t\t\t\tcontroller:  'EditPersonalProfileController'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'navigation@app' : {\n\t\t\t\t\t\t\tcontroller: function( $scope, isLeader ) {\n\t\t\t\t\t\t\t\t$scope.isLeader = isLeader;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttemplate: '<button type=\"button\" class=\"btn btn-sm btn-danger\" ng-if=\"isLeader\" ui-sref=\"admin\">Administrator</button>'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} )\n\n\t\t} );\n})();\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.config( function ( $locationProvider ) {\n\t\t$locationProvider.html5Mode( true );\n\t} );\n\n\t// Initialize Application Settings\n\tmodule.config( function ( SettingsProvider ) {\n\t\tSettingsProvider.setConfig( window.globalProfile.config );\n\t} );\n\n\tmodule.config( function ( $logProvider, SettingsProvider ) {\n\t\t$logProvider.debugEnabled( SettingsProvider.isDebug() );\n\t} );\n\n\t// Configure HTTP interceptors\n\tmodule.config( function ( $httpProvider ) {\n\t\t$httpProvider.interceptors.push( 'Session' );\n\t} );\n\n})( angular.module( 'globalProfile' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule\n\t\t.directive( 'fileReader', [function () {\n\t\t\treturn {\n\t\t\t\trestrict: 'A',\n\t\t\t\tscope:    {\n\t\t\t\t\tfileReader: '='\n\t\t\t\t},\n\t\t\t\tlink:     function ( $scope, $element, $attrs ) {\n\t\t\t\t\t$element.on( 'change', function ( event ) {\n\t\t\t\t\t\t$scope.$apply( function () {\n\t\t\t\t\t\t\t$scope.fileReader = event.target.files[0];\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}] );\n\n})( angular.module( 'globalProfile.common.fileReaderDirective', [] ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule\n\t\t.filter( 'offset', function () {\n\t\t\treturn function ( input, start ) {\n\t\t\t\tif ( angular.isUndefined( input ) ) return;\n\t\t\t\tstart = parseInt( start, 10 );\n\t\t\t\treturn input.slice( start );\n\t\t\t};\n\t\t} );\n\n})( angular.module( 'globalProfile.common.offsetFilter', [] ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.provider( 'Settings', function () {\n\t\tvar config = {};\n\n\t\tthis.setConfig = function ( c ) {\n\t\t\tconfig = c;\n\t\t};\n\n\t\tthis.isDebug = function () {\n\t\t\treturn config.environment === 'development';\n\t\t};\n\n\t\tfunction apiUrl( base, path ) {\n\t\t\tif ( typeof path === 'undefined' ) return base;\n\t\t\treturn ( path.indexOf( '/' ) === 0 )\n\t\t\t\t? base + path\n\t\t\t\t: base + '/' + path;\n\t\t}\n\n\t\tthis.$get = function () {\n\t\t\treturn {\n\t\t\t\tapi:    {\n\t\t\t\t\tmeasurements: function ( path ) {\n\t\t\t\t\t\treturn apiUrl( config.api.measurements, path );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tticket: config.ticket\n\t\t\t};\n\t\t}\n\t} );\n})( angular.module( 'globalProfile.common.settingsService', [] ) );\n","(function ( angular ) {\n\t'use strict';\n\tangular.module( 'globalProfile.directives', [] );\n})( angular );\n","(function ( module ) {\n\tmodule.directive( 'rtlOptions', ['$parse', function ( $parse ) {\n\t\tvar rtlOptions = function ( scope, attr, element, data, fnRtlIfTrue ) {\n\t\t\t// refresh the rtl options in the select element.\n\t\t\tvar options = element.find( \"option\" );\n\t\t\tfor ( var pos = 0, index = 0; pos < options.length; pos++ ) {\n\t\t\t\tvar elem = angular.element( options[pos] );\n\t\t\t\tif ( elem.val() != \"\" ) {\n\t\t\t\t\tvar locals = {};\n\t\t\t\t\tlocals[attr] = data[index];\n\t\t\t\t\telem.attr( \"dir\", fnRtlIfTrue( scope, locals ) ? 'rtl' : 'ltr' );\n\t\t\t\t\tindex++;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn {\n\t\t\tpriority: 0,\n\t\t\trequire:  'ngModel',\n\t\t\tlink:     function ( scope, iElement, iAttrs, ctrl ) {\n\t\t\t\t// parse expression and build array of rtl options\n\t\t\t\tvar expElements = iAttrs.rtlOptions.match( /^\\s*(.+)\\s+for\\s+(.+)\\s+in\\s+(.+)?\\s*/ ),\n\t\t\t\t\tattrToWatch = expElements[3],\n\t\t\t\t\tfnRtlIfTrue = $parse( expElements[1] );\n\t\t\t\tscope.$watch( attrToWatch, function ( newValue, oldValue ) {\n\t\t\t\t\tif ( newValue ) {\n\t\t\t\t\t\trtlOptions( scope, expElements[2], iElement, newValue, fnRtlIfTrue );\n\t\t\t\t\t}\n\t\t\t\t}, true );\n\t\t\t\t// handle model updates properly\n\t\t\t\tscope.$watch( iAttrs.ngModel, function ( newValue, oldValue ) {\n\t\t\t\t\tvar disOptions = $parse( attrToWatch )( scope );\n\t\t\t\t\tif ( newValue ) {\n\t\t\t\t\t\trtlOptions( scope, expElements[2], iElement, disOptions, fnRtlIfTrue );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\t}] );\n})( angular.module( 'globalProfile.directives' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.factory( 'Countries', function ( $log, $http, Settings ) {\n\t\treturn {\n\t\t\tcountries: function () {\n\t\t\t\treturn $http.get( Settings.api.measurements( '/iso_countries' ), {\n\t\t\t\t\tcache: true\n\t\t\t\t} ).then( function ( response ) {\n\t\t\t\t\treturn response.data;\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\t} );\n})( angular.module( 'globalProfile.api.measurements' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.factory( 'Languages', function ( $log, $http, Settings ) {\n\t\treturn {\n\t\t\tlanguages: function () {\n\t\t\t\treturn $http.get( Settings.api.measurements( '/languages' ), {\n\t\t\t\t\tcache: true\n\t\t\t\t} ).then( function ( response ) {\n\t\t\t\t\treturn response.data;\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\t} );\n})( angular.module( 'globalProfile.api.measurements' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.factory( 'Ministries', function ( $log, $resource, Settings ) {\n\t\treturn $resource( Settings.api.measurements( '/ministries/:ministry_id' ), {}, {\n\t\t\t'systems': {method: 'GET', isArray: true, params: {global_profile_only: 'true'}, cache: true},\n\t\t\t'query':   {method: 'GET', isArray: true}\n\t\t} );\n\t} );\n})( angular.module( 'globalProfile.api.measurements' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.factory( 'Profile', function ( $log, $resource, Settings ) {\n\t\tvar normalizeProfile = function ( profile ) {\n\t\t\t\t// Language\n\t\t\t\tif ( angular.isUndefined( profile.language ) ) {\n\t\t\t\t\tprofile.language = [];\n\t\t\t\t} else if ( angular.isString( profile.language ) ) {\n\t\t\t\t\tprofile.language = [profile.language];\n\t\t\t\t}\n\n\t\t\t\treturn profile;\n\t\t\t},\n\t\t\tapi = $resource( Settings.api.measurements( '/people/:person_id' ), {\n\t\t\t\tperson_id:   '@person_id',\n\t\t\t\tministry_id: '@ministry_id'\n\t\t\t}, {\n\t\t\t\tget:    {\n\t\t\t\t\tmethod: 'GET', interceptor: {\n\t\t\t\t\t\tresponse: function ( response ) {\n\t\t\t\t\t\t\treturn normalizeProfile( response.resource );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tquery:  {\n\t\t\t\t\tmethod: 'GET', isArray: true, interceptor: {\n\t\t\t\t\t\tresponse: function ( response ) {\n\t\t\t\t\t\t\treturn angular.forEach( response.resource, normalizeProfile );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcreate: {method: 'POST'},\n\t\t\t\tupdate: {method: 'PUT'}\n\t\t\t} );\n\t\tapi.defaultProfile = function () {\n\t\t\treturn {\n\t\t\t\tis_secure: false,\n\t\t\t\tlanguage:  []\n\t\t\t}\n\t\t};\n\t\treturn api;\n\t} );\n})( angular.module( 'globalProfile.api.measurements' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.factory( 'Session', function ( $injector, $q, $log, Settings ) {\n\t\tvar token,\n\t\t\tsession;\n\n\t\treturn {\n\t\t\tgetSession:    function () {\n\t\t\t\tvar deferred = $q.defer();\n\t\t\t\tif ( angular.isDefined( session ) ) {\n\t\t\t\t\tdeferred.resolve( session );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$injector.get( '$http' )\n\t\t\t\t\t\t.get( Settings.api.measurements( '/token' ), {params: {st: Settings.ticket}} )\n\t\t\t\t\t\t.then( function ( response ) {\n\t\t\t\t\t\t\ttoken = response.data.session_ticket;\n\t\t\t\t\t\t\tsession = response.data;\n\t\t\t\t\t\t\tdeferred.resolve( session );\n\t\t\t\t\t\t}, function ( reason ) {\n\t\t\t\t\t\t\tdeferred.reject( reason );\n\t\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\treturn deferred.promise;\n\t\t\t},\n\t\t\trequest:       function ( config ) {\n\t\t\t\tif ( config.url.indexOf( Settings.api.measurements() ) === 0 ) {\n\t\t\t\t\t$log.debug( 'Measurements API Request', config );\n\n\t\t\t\t\t// Enable HTTP Credentials for measurements API requests\n\t\t\t\t\tconfig.withCredentials = true;\n\n\t\t\t\t\t// Add token to request as Authorization Bearer\n\t\t\t\t\tif ( !angular.isUndefined( token ) ) {\n\t\t\t\t\t\tconfig.headers['Authorization'] = 'Bearer ' + token;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn config;\n\t\t\t},\n\t\t\tresponseError: function ( response ) {\n\t\t\t\treturn $q.reject( response );\n\t\t\t}\n\t\t}\n\t} );\n})( angular.module( 'globalProfile.api.measurements' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule\n\t\t.directive( 'profileForm', ['$log', 'Languages', 'Countries', function ( $log, Languages, Countries ) {\n\t\t\tvar defaultRequiredFields = [\n\t\t\t\t'cas_username',\n\t\t\t\t'last_name',\n\t\t\t\t'first_name',\n\t\t\t\t'gender',\n\t\t\t\t'birth_date',\n\t\t\t\t'marital_status',\n\t\t\t\t'language1',\n\t\t\t\t'mcc',\n\t\t\t\t'staff_status',\n\t\t\t\t'funding_source',\n\t\t\t\t'employment_country',\n\t\t\t\t'ministry_location_country',\n\t\t\t\t'date_joined_staff',\n\t\t\t\t'role',\n\t\t\t\t'scope'\n\t\t\t];\n\t\t\treturn {\n\t\t\t\trestrict:    'E',\n\t\t\t\trequire:     ['^ngModel'],\n\t\t\t\tscope:       {\n\t\t\t\t\tprofile:        '=ngModel',\n\t\t\t\t\trequiredFields: '=?profileRequiredFields'\n\t\t\t\t},\n\t\t\t\ttemplateUrl: 'js/components/profile-form/profile-form.html',\n\t\t\t\ttransclude:  true,\n\t\t\t\tlink:        function ( $scope, $element, $attrs ) {\n\t\t\t\t\tLanguages.languages().then( function ( languages ) {\n\t\t\t\t\t\t$scope.languages = languages;\n\t\t\t\t\t} );\n\n\t\t\t\t\tCountries.countries().then( function ( countries ) {\n\t\t\t\t\t\t$scope.countries = countries;\n\t\t\t\t\t} );\n\n\t\t\t\t\t$scope.showHelp = angular.isUndefined( $attrs.profileShowHelp ) ? true : $scope.$eval( $attrs.profileShowHelp ) === true;\n\t\t\t\t\t$scope.showPrivacy = $scope.$eval( $attrs.profileShowPrivacy ) === true;\n\t\t\t\t\t$scope.showLeftStaff = $scope.$eval( $attrs.profileShowLeftStaff ) === true;\n\n\t\t\t\t\tif ( angular.isUndefined( $attrs.profileRequiredFields ) ) {\n\t\t\t\t\t\t$scope.requiredFields = defaultRequiredFields;\n\t\t\t\t\t}\n\n\t\t\t\t\t$scope.isRequired = function ( name ) {\n\t\t\t\t\t\treturn $scope.requiredFields.indexOf( name ) > -1;\n\t\t\t\t\t};\n\n\t\t\t\t\t$scope.$watch( 'profile.staff_status', function ( staff_status, oldVal ) {\n\t\t\t\t\t\tif( staff_status === oldVal ) return;\n\t\t\t\t\t\tif ( angular.isUndefined( staff_status ) || staff_status == 'Volunteer' || staff_status == 'Other' ) {\n\t\t\t\t\t\t\t$scope.showStaffDates = false;\n\t\t\t\t\t\t\t$scope.requiredFields = _.without( $scope.requiredFields, 'date_joined_staff' );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$scope.showStaffDates = true;\n\t\t\t\t\t\t\tif ( _.indexOf( $scope.requiredFields, 'date_joined_staff' ) === -1 ) {\n\t\t\t\t\t\t\t\t$scope.requiredFields.push( 'date_joined_staff' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t$scope.$watch( 'profile.funding_source', function( funding_source, oldVal ) {\n\t\t\t\t\t\tif( funding_source === oldVal ) return;\n\t\t\t\t\t\tif( angular.isUndefined( funding_source ) || funding_source == 'Other' ) {\n\t\t\t\t\t\t\t$scope.showEmploymentCountry = false;\n\t\t\t\t\t\t\t$scope.requiredFields = _.without( $scope.requiredFields, 'employment_country' );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$scope.showEmploymentCountry = true;\n\t\t\t\t\t\t\tif ( _.indexOf( $scope.requiredFields, 'employment_country' ) === -1 ) {\n\t\t\t\t\t\t\t\t$scope.requiredFields.push( 'employment_country' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}] );\n\n})( angular.module( 'globalProfile.components.profileFormDirective', [\n\t'globalProfile.api.measurements'\n] ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule\n\t\t.controller( 'SidebarController', function ( $log, $scope, $state, people ) {\n\t\t\t$scope.$state = $state;\n\t\t\t$scope.people = people;\n\t\t\t$scope.filterText = '';\n\n\t\t\t$scope.clearFilter = function () {\n\t\t\t\t$scope.filterText = '';\n\t\t\t}\n\t\t} );\n\n})( angular.module( 'globalProfile.states.admin' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.controller( 'SelectMinistryController', function ( $log, $scope, $state, session, systems ) {\n\t\tfunction flatten( a, prop ) {\n\t\t\tvar items = [];\n\t\t\tangular.forEach( a, function ( item ) {\n\t\t\t\titems.push( item );\n\t\t\t\tif ( item.hasOwnProperty( prop ) && angular.isArray( item[prop] ) ) {\n\t\t\t\t\titems = items.concat( flatten( item[prop], prop ) );\n\t\t\t\t}\n\t\t\t} );\n\t\t\treturn items;\n\t\t}\n\n\t\tvar assignments = flatten( session.assignments, 'sub_ministries' );\n\n\t\t$scope.$state = $state;\n\t\t$scope.ministries = systems;\n\n\t\t$scope.isLeader = function ( ministry_id ) {\n\t\t\tvar roles = _.pluck( _.where( assignments, {ministry_id: ministry_id} ), 'team_role' );\n\t\t\treturn _.contains( roles, 'leader' ) || _.contains( roles, 'inherited_leader' );\n\t\t};\n\t} );\n\n})( angular.module( 'globalProfile.states.selectMinistry' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule\n\t\t.controller( 'AddProfileController', function ( $log, $scope, $state, profile, ministry, Profile ) {\n\t\t\t$scope.$state = $state;\n\t\t\t$scope.requiredFields = [\n\t\t\t\t'cas_username',\n\t\t\t\t'last_name',\n\t\t\t\t'first_name',\n\t\t\t\t'gender',\n\t\t\t\t'birth_date',\n\t\t\t\t'marital_status',\n\t\t\t\t'language1',\n\t\t\t\t'is_secure',\n\t\t\t\t'mcc',\n\t\t\t\t'staff_status',\n\t\t\t\t'funding_source',\n\t\t\t\t'employment_country',\n\t\t\t\t'ministry_location_country',\n\t\t\t\t'date_joined_staff',\n\t\t\t\t'role',\n\t\t\t\t'scope'\n\t\t\t];\n\t\t\t$scope.profile = angular.copy( profile );\n\n\t\t\t$scope.resetForm = function () {\n\t\t\t\t$scope.profile = angular.copy( profile );\n\t\t\t};\n\n\t\t\t$scope.saveProfile = function () {\n\t\t\t\tProfile.create( {ministry_id: ministry.ministry_id}, $scope.profile, function ( result ) {\n\t\t\t\t\t$state.go( 'admin.edit', {person_ID: result.person_id}, {reload: true} );\n\t\t\t\t}, function () {\n\t\t\t\t\t$log.error( 'Error Saving Profile' );\n\t\t\t\t} );\n\t\t\t};\n\n\t\t\t$scope.$on( '$stateChangeStart', function ( event, toState, toParams, fromState, fromParams ) {\n\t\t\t\tif ( $scope.profileForm.$dirty ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t$modal.open( {\n\t\t\t\t\t\ttemplateUrl: 'js/states/admin/unsaved.modal.html',\n\t\t\t\t\t\tcontroller:  function ( $scope, $modalInstance ) {\n\t\t\t\t\t\t\t$scope.save = function () {\n\t\t\t\t\t\t\t\t$modalInstance.close();\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t$scope.cancel = function () {\n\t\t\t\t\t\t\t\t$modalInstance.dismiss( 'discard' );\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t} ).result.then( function () {\n\t\t\t\t\t\t}, function ( action ) {\n\t\t\t\t\t\t\tif ( action === 'discard' ) {\n\t\t\t\t\t\t\t\t$scope.profileForm.$setPristine();\n\t\t\t\t\t\t\t\t$state.transitionTo( toState, toParams );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t} );\n\n})( angular.module( 'globalProfile.states.admin.add' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule\n\t\t.controller( 'EditProfileController', function ( $log, $scope, $state, profile, ministry, Profile, $modal ) {\n\t\t\t$scope.$state = $state;\n\t\t\t$scope.requiredFields = [\n\t\t\t\t'cas_username',\n\t\t\t\t'last_name',\n\t\t\t\t'first_name',\n\t\t\t\t'gender',\n\t\t\t\t'birth_date',\n\t\t\t\t'marital_status',\n\t\t\t\t'language1',\n\t\t\t\t'is_secure',\n\t\t\t\t'mcc',\n\t\t\t\t'staff_status',\n\t\t\t\t'funding_source',\n\t\t\t\t'employment_country',\n\t\t\t\t'ministry_location_country',\n\t\t\t\t'date_joined_staff',\n\t\t\t\t'role',\n\t\t\t\t'scope'\n\t\t\t];\n\t\t\t$scope.profile = angular.copy( profile );\n\n\t\t\t$scope.resetForm = function () {\n\t\t\t\t$scope.profile = angular.copy( profile );\n\t\t\t\t$scope.profileForm.$setPristine();\n\t\t\t};\n\n\t\t\t$scope.saveChanges = function () {\n\t\t\t\tProfile.update( {ministry_id: ministry.ministry_id}, $scope.profile, function ( result ) {\n\t\t\t\t\tprofile = result;\n\t\t\t\t\t$scope.profile = angular.copy( profile );\n\t\t\t\t\t$scope.profileForm.$setPristine();\n\t\t\t\t}, function () {\n\t\t\t\t\t$log.error( 'Error Saving Profile' );\n\t\t\t\t} );\n\t\t\t};\n\n\t\t\t$scope.$on( '$stateChangeStart', function ( event, toState, toParams, fromState, fromParams ) {\n\t\t\t\tif ( $scope.profileForm.$dirty ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t$modal.open( {\n\t\t\t\t\t\ttemplateUrl: 'js/states/admin/unsaved.modal.html',\n\t\t\t\t\t\tcontroller:  function ( $scope, $modalInstance ) {\n\t\t\t\t\t\t\t$scope.save = function () {\n\t\t\t\t\t\t\t\t$modalInstance.close();\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t$scope.cancel = function () {\n\t\t\t\t\t\t\t\t$modalInstance.dismiss( 'discard' );\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t} ).result.then( function () {\n\t\t\t\t\t\t}, function ( action ) {\n\t\t\t\t\t\t\tif ( action === 'discard' ) {\n\t\t\t\t\t\t\t\t$scope.profileForm.$setPristine();\n\t\t\t\t\t\t\t\t$state.transitionTo( toState, toParams );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n})( angular.module( 'globalProfile.states.admin.edit' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule\n\t\t.controller( 'ImportCSVController', function ( $log, $scope, $state, ministry, Profile ) {\n\t\t\t$scope.$state = $state;\n\t\t\t$scope.hasHeader = true;\n\t\t\t$scope.columns = [];\n\t\t\t$scope.pager = {\n\t\t\t\tpage:  1,\n\t\t\t\tbegin: 0\n\t\t\t};\n\n\t\t\t$scope.browse = function () {\n\t\t\t\tdocument.getElementById( 'fileBrowser' ).click();\n\t\t\t};\n\n\t\t\t$scope.$watch( 'file', function ( file ) {\n\t\t\t\tif ( angular.isUndefined( file ) ) return;\n\t\t\t\tparseCSV();\n\t\t\t} );\n\n\t\t\t$scope.$watch( 'hasHeader', function ( hasHeader ) {\n\t\t\t\tparseCSV();\n\t\t\t} );\n\n\t\t\t$scope.$watch( 'pager.page', function ( page ) {\n\t\t\t\tif ( angular.isUndefined( $scope.csv ) ) return;\n\t\t\t\t$scope.pager.begin = (page - 1) * 10;\n\t\t\t} );\n\n\t\t\tfunction parseCSV() {\n\t\t\t\tif ( angular.isUndefined( $scope.file ) ) return;\n\t\t\t\tif ( angular.isUndefined( $scope.hasHeader ) ) return;\n\n\t\t\t\tPapa.parse( $scope.file, {\n\t\t\t\t\theader:   false, // We remove first row manually if hasHeader is true\n\t\t\t\t\tcomplete: function ( results, file ) {\n\t\t\t\t\t\tvar columns = [];\n\t\t\t\t\t\t$scope.$apply( function () {\n\t\t\t\t\t\t\tif ( $scope.hasHeader ) {\n\t\t\t\t\t\t\t\t$scope.headerRow = results.data.shift();\n\t\t\t\t\t\t\t\tfor ( var i = 0; i < $scope.headerRow.length; i++ )\n\t\t\t\t\t\t\t\t\tcolumns.push( {index: i} );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdelete $scope.headerRow;\n\t\t\t\t\t\t\t\tfor ( var i = 0; i < results.data[0].length; i++ )\n\t\t\t\t\t\t\t\t\tcolumns.push( {index: i} );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$scope.columns = columns;\n\t\t\t\t\t\t\t$scope.csv = results;\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t\t}\n\t\t} );\n\n})( angular.module( 'globalProfile.states.admin.import' ) );\n","(function ( module ) {\n\t'use strict';\n\n\tmodule.controller( 'EditPersonalProfileController', function ( $log, $scope, session, ministry, profile, Profile ) {\n\t\t$scope.profile = angular.copy( profile );\n\n\t\t$scope.resetForm = function () {\n\t\t\t$scope.profile = angular.copy( profile );\n\t\t\t$scope.profileForm.$setPristine();\n\t\t};\n\n\t\t$scope.saveChanges = function () {\n\t\t\tvar method = angular.isUndefined( profile.id ) ? 'create' : 'update';\n\t\t\tProfile[method]( {ministry_id: ministry.ministry_id}, $scope.profile, function ( response ) {\n\t\t\t\tprofile = response;\n\t\t\t\t$scope.profile = angular.copy( profile );\n\t\t\t\t$scope.profileForm.$setPristine();\n\t\t\t} );\n\t\t};\n\t} );\n})( angular.module( 'globalProfile.states.profile.edit' ) );\n"],"sourceRoot":"/source/"}